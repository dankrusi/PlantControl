<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" >
<head>
  	<link rel="stylesheet" href="/css/jquery-ui.min.css">
  	<link rel="stylesheet" href="/css/jquery-ui.structure.min.css">
  	<link rel="stylesheet" href="/css/jquery-ui.theme.min.css">
    <link rel="stylesheet" href="/css/app.css">
    <script src="/scripts/jquery-3.1.1.min.js"></script>
    <script src="/scripts/jquery-ui.min.js"></script>
    <script src="/scripts/app.js"></script>
    <script>
    	$(document).ready(function(){
    		$("#save").click(function(){
    			// Setup the param to send
    			var params = {};
    			params["type"] = PlantControl.getQuery("type");
    			params["id"] = PlantControl.getQuery("id");
    			$(".auto-prop").each(function(){
    				params["prop_"+$(this).attr("name")] = $(this).val();
    			});
    			// Do call
				PlantControl.apiCall(
					"api/edit/save",
					params,
					function(success) {
						PlantControl.showMessage("Saved!")
					}
				);

    		});

    	});
    </script>
</head>
<body>
	<div class="header"></div>
	<div class="content">
		<h1>Edit</h1>
	    <table class="properties" app-data="api/edit/properties" auto-param="true">
	    	<tr>
	    		<td>{name}</td>
	    		<td><input class="auto-prop" name="{name}" value="{value}" {readonly} placeholder="{placeholder}"/></td>
			</tr>
	    </table>
	    <input type="button" id="save" value="Save"/>
	</div>
	<div class="footer"></div>
</body>
</html>
